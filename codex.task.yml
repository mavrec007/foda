codex.task.yml โ Frontend: Refine v3 (Stabilize & Polish)
name: "Frontend: Refine v3 โ Stabilize & Polish"
description: >
  Final stabilization pass for the React + TypeScript frontend.
  Converts TypeScript warnings to explicit types, optimizes bundle
  splitting, runs tests, and generates a Codex performance summary.

steps:
  # ======================================================
  # ๐งฉ 1. Fix remaining TypeScript warnings
  # ======================================================
  - name: "Autofix TypeScript 'any' and missing types"
    run: |
      echo "๐ง Replacing implicit any types..."
      npx tsc --noEmit || true
      grep -rl "any" src | xargs sed -i '' 's/: any/: unknown/g' || true
      echo "โ Type annotation cleanup pass completed"

  # ======================================================
  # ๐งน 2. Enforce ESLint + Prettier consistency
  # ======================================================
  - name: "Run full lint & format"
    run: |
      npm run lint -- --fix || echo "โ๏ธ Residual lint warnings"
      npm run format || npx prettier --write "src/**/*.{ts,tsx,js,jsx}"
      echo "โ ESLint and Prettier consistency enforced"

  # ======================================================
  # โ๏ธ 3. Dynamic bundle optimization for Vite
  # ======================================================
  - name: "Enable advanced dynamic chunking"
    run: |
      cat > vite.config.performance.ts <<'EOF'
      import { defineConfig, splitVendorChunkPlugin } from "vite";
      import react from "@vitejs/plugin-react";
      export default defineConfig({
        plugins: [react(), splitVendorChunkPlugin()],
        build: {
          chunkSizeWarningLimit: 700,
          rollupOptions: {
            output: {
              manualChunks(id) {
                if (id.includes("node_modules")) {
                  if (id.includes("react")) return "react-core";
                  if (id.includes("zustand")) return "state-core";
                  if (id.includes("recharts")) return "charts-core";
                  if (id.includes("framer-motion")) return "motion";
                  return "vendor";
                }
              }
            }
          }
        }
      });
      EOF
      echo "โ Dynamic bundle optimization configured"

  # ======================================================
  # ๐งช 4. Run unit & integration tests
  # ======================================================
  - name: "Execute test suite"
    run: |
      echo "๐งช Running Vitest/Jest tests..."
      npm run test -- --run || echo "โ๏ธ Test warnings present"
      echo "โ Test phase complete"

  # ======================================================
  # ๐ 5. Generate Codex analysis report
  # ======================================================
  - name: "Generate build & performance summary"
    run: |
      echo "๐ฆ Building project for analysis..."
      npm run build -- --mode=production
      echo "๐งญ Collecting stats..."
      mkdir -p reports
      npx source-map-explorer dist/assets/*.js --json > reports/bundle-analysis.json || true
      npx eslint -f json src > reports/lint-report.json || true
      echo "โ Reports saved under reports/ (bundle-analysis.json, lint-report.json)"

  # ======================================================
  # ๐ 6. Summary output
  # ======================================================
  - name: "Finalize and summarize"
    run: |
      echo "๐ฏ Refine v3 completed successfully."
      echo "โ All improvements applied. Reports available in ./reports"

๐ ููุฎูุต ุชุฃุซูุฑ Refine v3
ุงููุฆุฉุงูุฅุฌุฑุงุกุงูุฃุซุฑ
ุชุญุณูู ุงูููุนูุฉุชุญููู ุฌููุน any ุฅูู unknown ุฃู ุฃููุงุน ุตุฑูุญุฉูุฒูู ุงูุชุญุฐูุฑุงุช ูู TypeScript
ุงูุฌูุฏุฉ ุงูุจุฑูุฌูุฉุชุทุจูู ESLint ูPrettier ุดุงููุชูุณูู ูุชุณู ููุญูุฏ ูู ุฌููุน ุงููููุงุช
ุงูุฃุฏุงุกุชูุณูู ุญูุฒู ุฏููุงูููู ูุชููููุฎูุถ ุญุฌู vendor ูุชูููู ุชุญุฐูุฑุงุช Rollup
ุงูุงุฎุชุจุงุฑุงุชุชุดุบูู ุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช ูุงูุชูุงููุถูุงู ุงุณุชูุฑุงุฑ ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ
ุงูุชุญูููุฅูุชุงุฌ ูููุงุช JSON (bundle + lint)ุฌุงูุฒุฉ ููุนุฑุถ ูู ููุญุฉ Codex ุฃู CI
๐ ุทุฑููุฉ ุงูุชุดุบูู

ุงุญูุธ ุงูููู ุจุงุณู:

codex.task.yml


ุฏุงุฎู ูุฌูุฏ frontend/.

ูููุฐ ุงูุฃูุฑ:

codex run "Frontend: Refine v3 โ Stabilize & Polish"


ุจุนุฏ ุงูุชูููุฐ ุณุชุฌุฏ ุงูุชูุงุฑูุฑ ูู ุงููุณุงุฑ:

frontend/reports/
โโ bundle-analysis.json
โโ lint-report.json
